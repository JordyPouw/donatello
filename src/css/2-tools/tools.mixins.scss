// Mixins
//
// grid-mq($width)                    - @include grid-mq(min/max-sm/md/lg)
// custom-mq($min-max, $width)        - @include custom-mq(min/max, width-in-pixels-here)
//
// Styleguide Tools.Mixins


// $ Media queries.
// ========================================
@mixin grid-mq($width) {
  @if $width == min-sm {
    @media only screen and (min-width: mq-em($grid-query-width-sm + 1)) {@content;}
  }

  @else if $width == max-sm {
    @media only screen and (max-width: mq-em($grid-query-width-sm)) {@content;}
  }

  @else if $width == min-md {
    @media only screen and (min-width: mq-em($grid-query-width-md + 1)) {@content;}
  }

  @else if $width == max-md {
    @media only screen and (max-width: mq-em($grid-query-width-md)) {@content;}
  }

  @else if $width == min-lg {
    @media only screen and (min-width: mq-em($grid-query-width-lg + 1)) {@content;}
  }

  @else if $width == max-lg {
    @media only screen and (max-width: mq-em($grid-query-width-lg)) {@content;}
  }
}

@mixin custom-mq($min-max, $width) {
  @if $min-max == min {
    @media only screen and (min-width: mq-em($width + 1)) {@content;}
  }

  @else if $min-max == max {
    @media only screen and (max-width: mq-em($width)) {@content;}
  }
}

// $ Grid system.
// ========================================
@mixin grid-setting($grid-media-query, $grid-method, $prop) {
  @for $index from 1 through $grid-columns {    
    // If push or pull, add 0.
    @if ($grid-method == $grid-push) and ($index == 1) or ($grid-method == $grid-pull) and ($index == 1){
      .#{$grid-prefix}#{$grid-method}0#{$grid-media-query} {
        #{$prop}: auto;
      }
    }
    // If offset, add 0.
    @if ($grid-method == $grid-offset) and ($index == 1){
      .#{$grid-prefix}#{$grid-method}0#{$grid-media-query} {
        #{$prop}: 0;
      }
    }   
    // Normal loop from 1 through amount of columns.
    .#{$grid-prefix}#{$grid-method}#{$index}#{$grid-media-query} {
      #{$prop}: percentage(($index/$grid-columns));
    }
  }
}

@mixin make-grid($grid-media-query){
  @include grid-setting($grid-media-query, $grid-col, width);
  
  @if($grid-create-push == true){
    @include grid-setting($grid-media-query, $grid-push, left);
  }
  
  @if($grid-create-pull == true){
    @include grid-setting($grid-media-query, $grid-pull, right);
  }
  
  @if($grid-create-offset == true){
    @include grid-setting($grid-media-query, $grid-offset, margin-left);
  }
}
